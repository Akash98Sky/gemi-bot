# Spacefile Docs: https://go.deta.dev/docs/spacefile/v0
v: 0
micros:
  - name: gemi
    src: ./
    engine: python3.9
    primary: true
    run: gunicorn main:web_app --bind 0.0.0.0:$PORT -k aiohttp.GunicornWebWorker
    dev: gunicorn main:web_app --bind localhost:8080 -k aiohttp.GunicornWebWorker --reload
    presets:
      env:
        - name: BOT_TOKEN
          description: Telegram bot token
        - name: GOOGLE_API_KEY
          description: Google API key for using gemini
        - name: WEBHOOK_SECRET
          description: Telegram bot Webhook secret (Optional)
          default: ZKJ7cQAdjN6skpRFerVaHx4gYSmhDubz
    public_routes:
      - "/ping"
      - "/tg_webhook"
